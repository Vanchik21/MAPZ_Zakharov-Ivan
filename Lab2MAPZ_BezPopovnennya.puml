@startuml
|Клієнт|
start
:Авторизуватися / Зареєструватися;
:Поповнити рахунок;

|Клієнт|
:Обрати подію та результат;
:Ввести суму ставки;

|Система (Обробка ставок)|
:Розрахувати потенційний виграш;
if (Баланс достатній?) then (так)
  :Створити об'єкт Ставка (BetID, UserID, Amount, Status='Active');
  
  |База даних|
  :Зменшити баланс клієнта;
  :Зберегти ставку в БД;
  
  |Клієнт|
  :Отримати підтвердження ставки;
  
  ' Ця частина є логічним продовженням, 
  ' яке відбувається після завершення події
  
  |Система (Обробка ставок)|
  :Отримати офіційний результат події;
  :Знайти всі 'Active' ставки на цю подію;

  if (Ставка виграла?) then (так)
    :Розрахувати суму виграшу (сума * коефіцієнт);
    
    |База даних|
    :Нарахувати виграш на баланс клієнта;
    :Оновити статус ставки на 'Виграна';

  else (ні)
    |База даних|
    :Оновити статус ставки на 'Програна';
  endif
  
  |Система (Обробка ставок)|
  :Надіслати сповіщення клієнту про результат;

  |Клієнт|
  :Переглянути оновлений баланс та історію ставок;

else (ні)
  |Клієнт|
  :Отримати повідомлення про недостатність коштів;
endif

stop
@enduml